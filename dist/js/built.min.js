this.JST=this.JST||{},this.JST["partial/link-checker.html"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="backdrop-modal">\n\t<div class="custom-modal">\n\t\t<div class="modal-title">\n\t\t\tLink Test\n\t\t</div>\n\t\t<div class="progress-bar-handle">\n\t\t\t<div class="progress-bar"></div>\n\t\t</div>\n\t\t<div class="modal-report">\n\t\t\t<div class="modal-report-title">BROKEN LINKS</div>\n\t\t\t<div class="modal-report-table">\n\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>';return __p},this.JST["partial/menu.html"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="container">\n\t<div ng-class="menu.show ? \'menu-selected\' : \'\'">\n\t\t<div ng-click="menuSelected($index)" title="'+(null==(__t=menu.href)?"":__t)+'">\n\t\t\t&nbsp;&nbsp;&nbsp;'+(null==(__t=menu.name)?"":__t)+'&nbsp;&nbsp;&nbsp;\n\t\t</div>\n\t\t<div class="edit-button" ng-click="menu.showEdit=!menu.showEdit"></div>\n\t</div>\n\t<div ng-if="menu.showEdit" class="mega-menu-edit">\n\t\t<div class="padding-10">\n\t\t\tTitle : <input type="text" ng-model="menu.name">\n\t\t</div>\n\t\t<div class="padding-10">\n\t\t\tHref  : <input ng-model="menu.href">\n\t\t</div>\n\t\t<div>\n\t\t\t<div class="button delete-button" ng-click="deleteMenu($index)">\n\t\t\t\t&nbsp;Delete&nbsp;\n\t\t\t</div>\n\t\t\t<a href="'+(null==(__t=menu.href)?"":__t)+'" target="_blank">\n\t\t\t\t<div class="button delete-button">\n\t\t\t\t\t&nbsp;Visit Link&nbsp;\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n\t<div ng-show="menu.show" class="submenu">\n\t\t<div class="button" ng-click="addSubMenu(menu.data)"> +Add Category </div>\n\t\t<div ng-repeat="submenu in menu.data" submenu></div>\n\t\t<div class="container image-container">\n\t\t<div class="big-image">\n\t\t\t<div>\n\t\t\t\tImage URL : <input type="text" ng-model="menu.images[0].url" name="">\n\t\t\t\tHref : <input type="text" ng-model="menu.images[0].href" name="">\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="big-image">\n\t\t\t<div>\n\t\t\t\tImage URL : <input type="text" ng-model="menu.images[1].url" name="">\n\t\t\t\tHref : <input type="text" ng-model="menu.images[1].href" name="">\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\tImage URL : <input type="text" ng-model="menu.images[2].url" name="">\n\t\t\t\tHref : <input type="text" ng-model="menu.images[2].href" name="">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t</div>\n</div>';return __p},this.JST["partial/strip.html"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='\n<div class="button download-button" ng-click="downloadJSON()">\n\t\t&nbsp;&nbsp;&nbsp;DOWNLOAD&nbsp;&nbsp;&nbsp;\n</div>\n<div class="button" ng-if="fileName">\n\t'+(null==(__t=fileName)?"":__t)+'\n</div>\n<a id="download-button" ng-show="false"></a>\n<div ng-if="false" class="button download-button broker-link-button" ng-click="showLinkChecker=true;checkBrokenLinks()">\n\t\t&nbsp;&nbsp;&nbsp;TEST BROKEN LINKS&nbsp;&nbsp;&nbsp;\n</div>\n<div>\n\t<ul>\n\t\t<li ng-repeat="menu in data" menu></li>\n\t\t<div ng-click="addMainMenu()" class="add-main-menu button">+</div>\n\t</ul>\n</div>\n\n<link-checker ng-if="showLinkChecker"></link-checker>\n';return __p},this.JST["partial/submenu-itemlist.html"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="container">\n\t\n\t<div ng-click="subsubmenu.showEdit=!subsubmenu.showEdit" title="'+(null==(__t=subsubmenu.href)?"":__t)+'">\n\t\t'+(null==(__t=subsubmenu.name)?"":__t)+'\n\t\t<span ng-if="subsubmenu.isNew" class="new-item">New</span>\n\t</div>\n\t<div ng-if="subsubmenu.showEdit" class="mega-menu-edit">\n\t\t<div class="padding-10">\n\t\t\tTitle : <input type="text" ng-model="subsubmenu.name">\n\t\t</div>\n\t\t<div class="padding-10">\n\t\t\tHref  : <input ng-model="subsubmenu.href">\n\t\t</div>\n\t\t<div class="padding-10">\n\t\t\tisNew  : <input type="checkbox" ng-model="subsubmenu.isNew">\n\t\t</div>\n\t\t<div>\n\t\t\t<div class="button delete-button" ng-click="deleteSubSubMenu($parent.$parent.$index, $index)">\n\t\t\t\t&nbsp;Delete&nbsp;\n\t\t\t</div>\n\t\t\t<a href="'+(null==(__t=subsubmenu.href)?"":__t)+'" target="_blank">\n\t\t\t\t<div class="button delete-button">\n\t\t\t\t\t&nbsp;Visit Link&nbsp;\n\t\t\t\t</div>\n\t\t\t</a>\n\t\t</div>\n\t</div>\n</div>';return __p},this.JST["partial/submenu.html"]=function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="subsubmenu container">\n\t<div class="container">\n\t\t<div ng-click="submenu.showEdit=!submenu.showEdit" title="'+(null==(__t=submenu.href)?"":__t)+'">\n\t\t\t'+(null==(__t=submenu.name)?"":__t)+'\n\t\t</div>\n\t\t<div ng-if="submenu.showEdit" class="mega-menu-edit">\n\t\t\t<div class="padding-10">\n\t\t\t\tTitle : <input type="text" ng-model="submenu.name">\n\t\t\t</div>\n\t\t\t<div class="padding-10">\n\t\t\t\tHref  : <input ng-model="submenu.href">\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<div class="button delete-button" ng-click="deleteSubMenu($index)">\n\t\t\t\t\t&nbsp;Delete&nbsp;\n\t\t\t\t</div>\n\t\t\t\t<a href="'+(null==(__t=submenu.href)?"":__t)+'" target="_blank">\n\t\t\t\t\t<div class="button delete-button">\n\t\t\t\t\t\t&nbsp;Visit Link&nbsp;\n\t\t\t\t\t</div>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<ul>\n\t<li ng-repeat="subsubmenu in submenu.data" submenu-itemlist></li>\n\t<div class="button" ng-click="addSubSubMenu(submenu.data)"> +Add Item </div>\n\t</ul>\n\t\n</div>';return __p},angular.module("megamenu.controller",[]),angular.module("megamenu.directive",[]),angular.module("megamenu.service",[]),angular.module("megamenu",["megamenu.controller","megamenu.directive","megamenu.service"]),angular.module("megamenu").controller("megamenu.ctrl",["$scope","Network",function($scope,Network){$scope.addMainMenu=function(){$scope.data.push({name:"*new",href:"http://www.craftsvilla.com",data:[{name:"New Type",href:"www.craftsvilla.com",data:[{name:"New sub type",href:"www.craftsvilla.com"}]}]})},$scope.addSubMenu=function(menu){return menu.push({name:"New Type",href:"www.craftsvilla.com",data:[{name:"New sub type",href:"www.craftsvilla.com"}]}),menu},$scope.addSubSubMenu=function(menu){return menu.push({name:"New sub type",href:"www.craftsvilla.com"}),menu},$scope.deleteMenu=function(index){confirm("Do you want to delete main menu")&&$scope.data.splice(index,1)},$scope.deleteSubMenu=function(index){confirm("Do you want to delete sub menu")&&$scope.currentMenu.data.splice(index,1)},$scope.deleteSubSubMenu=function(parentIndex,index){confirm("Do you want to delete sub sub menu")&&$scope.currentMenu.data[parentIndex].data.splice(index,1)},$scope.menuSelected=function(index){$scope.currentMenu&&($scope.currentMenu.show=!1),$scope.currentMenu=$scope.data[index],$scope.data[index].show=!$scope.data[index].show},$scope.downloadJSON=function(){var allowedArray=["data","href","url","images","name","isNew"],fileName=["megamenu",(new Date).getTime().toString().slice(0,10),"json"].join(".");setTimeout(function(){var dataStr="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify($scope.data,allowedArray,"\t")),dlAnchorElem=document.getElementById("download-button");dlAnchorElem.setAttribute("href",dataStr),dlAnchorElem.setAttribute("download",fileName),dlAnchorElem.click()},100),$scope.fileName=fileName},$scope.checkBrokenLinks=function(){$scope.requestCount=0,$scope.responseCount=0;var i,j,k,data=$scope.data;for(i=0;i<data.length;i++)for($scope.checkLink(data[i]),j=0;j<data[i].data.length;j++)for($scope.checkLink(data[i].data[j]),k=0;k<data[i].data[j].data.length;k++)$scope.checkLink(data[i].data[j].data[k])},$scope.checkLink=function(data){data.href&&(Network.checkLink({url:data.href}).then($scope.onResponse,$scope.onError),$scope.requestCount++)},$scope.onResponse=function(response){$scope.responseCount++},$scope.onError=function(response){$scope.responseCount++},Network.fetch().success(function(response){$scope.data=response})}]),angular.module("megamenu.directive").directive("strip",[function(){return{restrict:"E",templateUrl:"partial/strip.html"}}]).directive("submenu",[function(){return{restrict:"A",templateUrl:"partial/submenu.html"}}]).directive("submenuItemlist",[function(){return{restrict:"A",templateUrl:"partial/submenu-itemlist.html"}}]).directive("linkChecker",[function(){return{restrict:"E",templateUrl:"partial/link-checker.html"}}]).directive("menu",[function(){return{restrict:"A",templateUrl:"partial/menu.html"}}]),angular.module("megamenu.service").service("Network",["$http",function($http){function fetch(){return $http.get("data/data.json")}function checkLink(data){return $http.get(data.url)}return{fetch:fetch,checkLink:checkLink}}]);